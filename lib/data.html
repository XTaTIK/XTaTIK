package Fake;
use utf8;
1;
__DATA__

@@ index.html.ep
% layout 'default';

@@ products.html.ep
% layout 'default';
% title xtext 'products_nav_name';

@@ about.html.ep
% layout 'default';
% title 'About';

@@ contact.html.ep
% layout 'default';
% title 'Contact';

% if ( form_checker_ok() ) {

    <p class="message success">Your message was successfully sent.</p>

% } else {
    %= form_for contact => (method => 'POST') => begin
        %= csrf_field

        <%== form_checker_error_wrapped %>

        <ul>
            <li><label for="name">*Name:</label><%= text_field 'name' %></li>
            <li><label for="email">*Email:</label><%= text_field 'email'%></li>
            <li><label for="province">*Province:</label
                ><%= select_field province => [
                    [ '--please select--' => 'none' ],
                    [ 'Alberta' => 'AB' ],
                    [ 'British Columbia' => 'BC'],
                    [ 'Manitoba' => 'MB'],
                    [ 'New Brunswick' => 'NB'],
                    [ 'New Foundland' => 'NF'],
                    [ 'Northwest Terriories' => 'NT'],
                    [ 'Nova Scotia' => 'NS'],
                    [ 'Nunavut' => 'NU'],
                    [ 'Ontario' => 'ON'],
                    [ 'Prince Edward Island' => 'PE'],
                    [ 'Quebec' => 'QC'],
                    [ 'Saskatchewan' => 'SK'],
                    [ 'Yukon' => 'YT'],
                ]
            %></li>
            <li><label for="Message" class="textarea_label">*Message:</label
                ><%= text_area 'message', cols => 40, rows => 5 %>
            </li>
        </ul>
        %= submit_button 'Send'
    % end
% }

<ul id="locations">
    % for my $loc ( @{xtext('locations')} ) {
        <li>
            <h3><%= $loc->{name} %></h3>
            <address class="address">
                <%== $loc->{address} %>
                % if ( length $loc->{hours} ) {
                    <br><span class="hours"><%= $loc->{hours} %></span>
                % } if ( length $loc->{note} ) {
                    <br><small><%= $loc->{note} %></small>
                % }
            </address>
            <address class="phones">
                % if ( length $loc->{phone} ) {
                    <span>Phone:</span> <%= $loc->{phone} %><br>
                % } if ( length $loc->{tfphone} ) {
                    <span>Toll-free:</span> <%= $loc->{tfphone} %><br>
                % } if ( length $loc->{fax} ) {
                    <span>Fax:</span> <%= $loc->{fax} %><br>
                % } if ( length $loc->{tffax} ) {
                    <span>Toll-free fax:</span> <%= $loc->{tffax} %><br>
                % } if ( length $loc->{email} ) {
                    <span>Email:</span> <%= $loc->{email} %>
                % }
            </address>
        </li>
    % }
</ul>

@@ quicknote.html.ep
% layout 'email';
% title 'Quicknote Message';

<ul>
    <li><strong>Sent on:</strong><%= scalar(localtime) %></li>
    <li><strong>Host:</strong><%= stash 'visitor_ip' %></li>
    <li><strong>Name:</strong><%= param 'name' %></li>
    <li><strong>Email:</strong><%= param 'email' %></li>
    <li><strong>Province:</strong><%= param 'province' %></li>
    <li><strong>Message:</strong><%= param 'message' %></li>
</ul>

@@ layouts/email.html.ep
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title><%= xtext('market') . ' / ' . xtext('company_name') %></title>
</head>
<body>
    <h1>Quicknote Message</h1>
    <%= content %>
</body>


@@ layouts/default.html.ep
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title><%= title() ? title() . ' /' : '' %>
        <%= xtext('market') . ' / ' . xtext('company_name') %></title>
</head>
<body>
    <h1><%= xtext 'market' %>
            / <%= xtext 'company_name' %></h1>

    % if ( title ) {
        <h2><%= title %></h2>
    % }

    <nav>
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/products"><%=
                    xtext 'products_nav_name'
                %></a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/contact">Contact</a></li>
        </ul>
    </nav>

    <%= content %>
</body>

<footer>
    <small>Copyright Â© <%= (localtime)[5] + 1900 %>
        by <%= xtext('company_name') %></small>
</footer>